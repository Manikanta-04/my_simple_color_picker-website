<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHROMA — Color Studio</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@300;400;500&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #12121a;
    --border: rgba(255,255,255,0.07);
    --text: #f0f0f5;
    --muted: #555566;
    --picked: #ff4d6d;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
    cursor: crosshair;
  }

  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
    background-size: 44px 44px;
    pointer-events: none;
    z-index: 0;
  }

  .ambient {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 700px;
    height: 700px;
    border-radius: 50%;
    opacity: 0.07;
    pointer-events: none;
    z-index: 0;
    filter: blur(60px);
    transition: background 0.5s ease;
    background: radial-gradient(circle, #ff4d6d 0%, transparent 70%);
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 1080px;
    margin: 0 auto;
    padding: 44px 24px 60px;
  }

  header {
    margin-bottom: 52px;
  }

  h1 {
    font-family: 'Bebas Neue', cursive;
    font-size: clamp(58px, 9vw, 100px);
    letter-spacing: 0.06em;
    line-height: 1;
    background: linear-gradient(135deg, #ffffff 30%, #ff4d6d 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.4s ease;
  }

  .tagline {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: 13px;
    color: var(--muted);
    margin-top: 4px;
    letter-spacing: 0.04em;
  }

  .main-grid {
    display: grid;
    grid-template-columns: 1fr 320px;
    gap: 20px;
    align-items: start;
  }

  .picker-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 28px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s;
  }

  .picker-card:hover { border-color: rgba(255,255,255,0.12); }

  .picker-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--picked), transparent);
    opacity: 0.9;
    transition: background 0.4s;
  }

  #spectrum {
    width: 100%;
    height: 260px;
    border-radius: 12px;
    cursor: crosshair;
    display: block;
    box-shadow: 0 0 0 1px var(--border);
    transition: box-shadow 0.3s;
  }

  #spectrum:hover {
    box-shadow: 0 0 0 1px rgba(255,255,255,0.18), 0 0 30px rgba(255,77,109,0.08);
  }

  .cursor-ring {
    position: fixed;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 2.5px solid #fff;
    pointer-events: none;
    transform: translate(-50%, -50%);
    box-shadow: 0 0 0 1px rgba(0,0,0,0.5), 0 0 14px rgba(255,255,255,0.25);
    z-index: 9999;
    display: none;
    transition: background 0.05s;
  }

  .sliders {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .slider-row {
    display: flex;
    align-items: center;
    gap: 14px;
  }

  .slider-label {
    font-size: 9px;
    letter-spacing: 0.18em;
    color: var(--muted);
    text-transform: uppercase;
    width: 30px;
    flex-shrink: 0;
  }

  input[type=range] {
    flex: 1;
    -webkit-appearance: none;
    height: 10px;
    border-radius: 8px;
    outline: none;
    cursor: pointer;
  }

  #hueSlider {
    background: linear-gradient(to right,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00);
  }

  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #fff;
    border: 2px solid rgba(0,0,0,0.25);
    box-shadow: 0 2px 10px rgba(0,0,0,0.5);
    cursor: grab;
    transition: transform 0.15s, box-shadow 0.15s;
  }

  input[type=range]::-webkit-slider-thumb:hover {
    transform: scale(1.2);
    box-shadow: 0 4px 18px rgba(0,0,0,0.6), 0 0 0 4px rgba(255,255,255,0.12);
  }

  input[type=range]::-webkit-slider-thumb:active {
    cursor: grabbing;
    transform: scale(1.1);
  }

  .slider-value {
    font-size: 11px;
    color: var(--muted);
    width: 34px;
    text-align: right;
    flex-shrink: 0;
  }

  .right-panel {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .preview-box {
    height: 150px;
    border-radius: 16px;
    border: 1px solid var(--border);
    position: relative;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.3s;
  }

  .preview-box:hover {
    transform: scale(1.02);
    box-shadow: 0 10px 40px rgba(0,0,0,0.5);
  }

  .preview-inner {
    position: absolute;
    inset: 0;
    transition: background 0.15s;
  }

  .preview-hint {
    position: absolute;
    bottom: 12px;
    left: 14px;
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.45);
    text-shadow: 0 1px 4px rgba(0,0,0,0.9);
  }

  .sparks-layer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .spark {
    position: absolute;
    border-radius: 50%;
    animation: sparkFly 0.75s ease-out forwards;
  }

  @keyframes sparkFly {
    0% { transform: translate(0,0) scale(1); opacity: 1; }
    100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
  }

  @keyframes ripple {
    0% { transform: translate(-50%,-50%) scale(0); opacity: 0.5; }
    100% { transform: translate(-50%,-50%) scale(5); opacity: 0; }
  }

  .ripple {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255,255,255,0.35);
    animation: ripple 0.65s ease-out forwards;
    pointer-events: none;
  }

  .info-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px;
    transition: border-color 0.3s;
  }

  .info-card:hover { border-color: rgba(255,255,255,0.11); }

  .color-values { display: flex; flex-direction: column; gap: 8px; }

  .value-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    background: rgba(255,255,255,0.03);
    border-radius: 10px;
    cursor: pointer;
    border: 1px solid transparent;
    transition: border-color 0.2s, background 0.2s, transform 0.15s;
    position: relative;
    overflow: hidden;
  }

  .value-row:hover {
    border-color: rgba(255,255,255,0.08);
    background: rgba(255,255,255,0.06);
    transform: translateX(3px);
  }

  .value-row:active { transform: scale(0.98); }

  .value-label {
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
  }

  .value-text {
    font-size: 12px;
    letter-spacing: 0.04em;
    font-weight: 500;
    color: var(--text);
    transition: opacity 0.2s;
  }

  .copy-hint {
    position: absolute;
    right: 14px;
    font-size: 9px;
    letter-spacing: 0.15em;
    color: var(--picked);
    text-transform: uppercase;
    opacity: 0;
    transform: translateY(4px);
    transition: opacity 0.2s, transform 0.2s;
  }

  .value-row.copied .copy-hint { opacity: 1; transform: translateY(0); }
  .value-row.copied .value-text { opacity: 0; }

  .palette-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px;
  }

  .palette-header {
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .palette-swatches {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .swatch {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
    position: relative;
  }

  .swatch:hover {
    transform: scale(1.22) translateY(-3px);
    border-color: rgba(255,255,255,0.5);
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
  }

  .swatch::after {
    content: attr(data-hex);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    background: #1e1e2e;
    border: 1px solid var(--border);
    color: var(--text);
    font-size: 10px;
    padding: 4px 8px;
    border-radius: 6px;
    white-space: nowrap;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
    font-family: 'DM Mono', monospace;
  }

  .swatch:hover::after { opacity: 1; }

  .add-swatch {
    width: 34px;
    height: 34px;
    border-radius: 10px;
    border: 2px dashed var(--muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    font-size: 20px;
    font-weight: 200;
    transition: border-color 0.2s, color 0.2s, transform 0.2s;
    background: transparent;
  }

  .add-swatch:hover {
    border-color: var(--text);
    color: var(--text);
    transform: scale(1.15);
  }

  .btn-random {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid var(--border);
    background: rgba(255,255,255,0.03);
    color: var(--text);
    font-family: 'DM Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.22em;
    text-transform: uppercase;
    cursor: pointer;
    transition: background 0.2s, border-color 0.2s, transform 0.15s, box-shadow 0.2s;
  }

  .btn-random:hover {
    background: rgba(255,255,255,0.07);
    border-color: rgba(255,255,255,0.18);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  .btn-random:active { transform: scale(0.98); }

  .toast {
    position: fixed;
    bottom: 28px;
    left: 50%;
    transform: translateX(-50%) translateY(80px);
    background: #1a1a28;
    border: 1px solid var(--border);
    border-radius: 100px;
    padding: 11px 24px;
    font-size: 11px;
    letter-spacing: 0.08em;
    color: var(--text);
    transition: transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 1000;
    pointer-events: none;
    white-space: nowrap;
  }

  .toast.show { transform: translateX(-50%) translateY(0); }

  @media (max-width: 720px) {
    .main-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="ambient" id="ambient"></div>
<div class="cursor-ring" id="cursorRing"></div>

<div class="container">
  <header>
    <h1 id="mainTitle">CHROMA</h1>
    <div class="tagline">— professional color studio</div>
  </header>

  <div class="main-grid">
    <div class="picker-card">
      <canvas id="spectrum"></canvas>
      <div class="sliders">
        <div class="slider-row">
          <span class="slider-label">HUE</span>
          <input type="range" id="hueSlider" min="0" max="360" value="348">
          <span class="slider-value" id="hueVal">348°</span>
        </div>
        <div class="slider-row">
          <span class="slider-label">ALPHA</span>
          <input type="range" id="alphaSlider" min="0" max="100" value="100">
          <span class="slider-value" id="alphaVal">100%</span>
        </div>
      </div>
    </div>

    <div class="right-panel">
      <div class="preview-box" id="previewBox" onclick="spawnSparks(event)">
        <div class="preview-inner" id="previewInner" style="background:#ff4d6d"></div>
        <div class="sparks-layer" id="sparksLayer"></div>
        <div class="preview-hint">click for sparks</div>
      </div>

      <div class="info-card">
        <div class="color-values">
          <div class="value-row" onclick="copyVal('hex', this)">
            <span class="value-label">HEX</span>
            <span class="value-text" id="valHex">#FF4D6D</span>
            <span class="copy-hint">copied!</span>
          </div>
          <div class="value-row" onclick="copyVal('rgb', this)">
            <span class="value-label">RGB</span>
            <span class="value-text" id="valRgb">255, 77, 109</span>
            <span class="copy-hint">copied!</span>
          </div>
          <div class="value-row" onclick="copyVal('hsl', this)">
            <span class="value-label">HSL</span>
            <span class="value-text" id="valHsl">348°, 100%, 65%</span>
            <span class="copy-hint">copied!</span>
          </div>
          <div class="value-row" onclick="copyVal('css', this)">
            <span class="value-label">CSS</span>
            <span class="value-text" id="valCss">rgba(255,77,109,1.00)</span>
            <span class="copy-hint">copied!</span>
          </div>
        </div>
      </div>

      <div class="palette-card">
        <div class="palette-header">Saved Palette</div>
        <div class="palette-swatches" id="paletteSwatches"></div>
      </div>

      <button class="btn-random" onclick="randomColor()">⟳ &nbsp; Random Color</button>
    </div>
  </div>
</div>

<div class="toast" id="toast">Copied!</div>

<script>
  const canvas = document.getElementById('spectrum');
  const ctx = canvas.getContext('2d');
  const hueSlider = document.getElementById('hueSlider');
  const alphaSlider = document.getElementById('alphaSlider');
  const previewInner = document.getElementById('previewInner');
  const cursorRing = document.getElementById('cursorRing');
  const ambient = document.getElementById('ambient');
  const mainTitle = document.getElementById('mainTitle');

  let currentHue = 348;
  let currentAlpha = 1;
  let pickerX = 0, pickerY = 0;
  let isDragging = false;
  let palette = ['#FF4D6D','#4DFFA0','#4DAAFF','#FFD24D','#C44DFF'];
  let lastRgb = {r:255, g:77, b:109};

  // HSL -> RGB
  function hslToRgb(h, s, l) {
    s = Math.min(1, Math.max(0, s));
    l = Math.min(1, Math.max(0, l));
    if (s === 0) { const v = Math.round(l*255); return [v,v,v]; }
    const q = l < 0.5 ? l*(1+s) : l+s-l*s;
    const p = 2*l-q;
    const hue2rgb = (p,q,t) => {
      if (t<0) t+=1; if (t>1) t-=1;
      if (t<1/6) return p+(q-p)*6*t;
      if (t<1/2) return q;
      if (t<2/3) return p+(q-p)*(2/3-t)*6;
      return p;
    };
    return [
      Math.round(hue2rgb(p,q,h+1/3)*255),
      Math.round(hue2rgb(p,q,h)*255),
      Math.round(hue2rgb(p,q,h-1/3)*255)
    ];
  }

  // RGB -> HSL
  function rgbToHsl(r,g,b) {
    r/=255; g/=255; b/=255;
    const max=Math.max(r,g,b), min=Math.min(r,g,b);
    let h=0, s=0, l=(max+min)/2;
    if (max!==min) {
      const d=max-min;
      s = l>0.5 ? d/(2-max-min) : d/(max+min);
      switch(max){
        case r: h=((g-b)/d+(g<b?6:0))/6; break;
        case g: h=((b-r)/d+2)/6; break;
        case b: h=((r-g)/d+4)/6; break;
      }
    }
    return {h, s, l};
  }

  function drawSpectrum() {
    const W = canvas.width, H = canvas.height;
    if (!W || !H) return;
    const img = ctx.createImageData(W, H);
    for (let y=0; y<H; y++) {
      for (let x=0; x<W; x++) {
        const s = x/W;
        const rawL = 1 - y/H;
        // Map S and L from picker coords
        // Top-left = white, top-right = pure hue, bottom = black
        const lightness = rawL * (1 - s*0.5);
        const saturation = s === 0 ? 0 : Math.min(1, s / (1 - Math.abs(2*lightness - 1) + 0.001));
        const [r,g,b] = hslToRgb(currentHue/360, saturation, lightness);
        const i = (y*W+x)*4;
        img.data[i]=r; img.data[i+1]=g; img.data[i+2]=b; img.data[i+3]=255;
      }
    }
    ctx.putImageData(img, 0, 0);

    // Draw picker dot
    ctx.beginPath();
    ctx.arc(pickerX, pickerY, 9, 0, Math.PI*2);
    ctx.strokeStyle = 'rgba(0,0,0,0.5)';
    ctx.lineWidth = 3;
    ctx.stroke();
    ctx.beginPath();
    ctx.arc(pickerX, pickerY, 9, 0, Math.PI*2);
    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.stroke();
  }

  function updateUI(r, g, b) {
    lastRgb = {r,g,b};
    const hex = '#' + [r,g,b].map(v=>v.toString(16).padStart(2,'0')).join('').toUpperCase();
    const {h,s,l} = rgbToHsl(r,g,b);
    const alpha = currentAlpha;
    const css = `rgba(${r},${g},${b},${alpha.toFixed(2)})`;
    const hslStr = `${Math.round(h*360)}°, ${Math.round(s*100)}%, ${Math.round(l*100)}%`;

    document.getElementById('valHex').textContent = hex;
    document.getElementById('valRgb').textContent = `${r}, ${g}, ${b}`;
    document.getElementById('valHsl').textContent = hslStr;
    document.getElementById('valCss').textContent = css;

    previewInner.style.background = css;
    document.documentElement.style.setProperty('--picked', hex);
    ambient.style.background = `radial-gradient(circle, ${hex} 0%, transparent 70%)`;
    alphaSlider.style.background = `linear-gradient(to right, transparent, ${hex})`;

    // Title gradient
    mainTitle.style.background = `linear-gradient(135deg, #ffffff 30%, ${hex} 100%)`;
    mainTitle.style.webkitBackgroundClip = 'text';
    mainTitle.style.backgroundClip = 'text';
    mainTitle.style.webkitTextFillColor = 'transparent';

    cursorRing.style.background = css;
  }

  function pickColor(x, y) {
    pickerX = Math.max(0, Math.min(canvas.width-1, x));
    pickerY = Math.max(0, Math.min(canvas.height-1, y));
    const px = ctx.getImageData(Math.floor(pickerX), Math.floor(pickerY), 1, 1).data;
    updateUI(px[0], px[1], px[2]);
    drawSpectrum();
  }

  function resizeCanvas() {
    canvas.width = canvas.offsetWidth;
    canvas.height = canvas.offsetHeight;
    pickerX = canvas.width * 0.75;
    pickerY = canvas.height * 0.25;
    drawSpectrum();
    pickColor(pickerX, pickerY);
  }

  // Canvas events
  canvas.addEventListener('mousedown', e => {
    isDragging = true;
    const r = canvas.getBoundingClientRect();
    pickColor(e.clientX - r.left, e.clientY - r.top);
  });

  canvas.addEventListener('mousemove', e => {
    const r = canvas.getBoundingClientRect();
    const x = e.clientX - r.left, y = e.clientY - r.top;
    cursorRing.style.display = 'block';
    cursorRing.style.left = e.clientX + 'px';
    cursorRing.style.top = e.clientY + 'px';
    if (isDragging) pickColor(x, y);
  });

  canvas.addEventListener('mouseleave', () => cursorRing.style.display = 'none');
  document.addEventListener('mouseup', () => isDragging = false);

  // Sliders
  hueSlider.addEventListener('input', () => {
    currentHue = parseInt(hueSlider.value);
    document.getElementById('hueVal').textContent = currentHue + '°';
    drawSpectrum();
    pickColor(pickerX, pickerY);
  });

  alphaSlider.addEventListener('input', () => {
    currentAlpha = parseInt(alphaSlider.value) / 100;
    document.getElementById('alphaVal').textContent = parseInt(alphaSlider.value) + '%';
    updateUI(lastRgb.r, lastRgb.g, lastRgb.b);
  });

  // Sparks
  function spawnSparks(e) {
    const box = document.getElementById('previewBox');
    const rect = box.getBoundingClientRect();
    const cx = e.clientX - rect.left;
    const cy = e.clientY - rect.top;
    const layer = document.getElementById('sparksLayer');
    const hex = document.getElementById('valHex').textContent;

    // Ripple
    const rip = document.createElement('div');
    rip.className = 'ripple';
    rip.style.left = cx + 'px';
    rip.style.top = cy + 'px';
    layer.appendChild(rip);
    setTimeout(() => rip.remove(), 700);

    // Sparks
    for (let i = 0; i < 22; i++) {
      const sp = document.createElement('div');
      sp.className = 'spark';
      const angle = Math.random() * Math.PI * 2;
      const dist = 35 + Math.random() * 70;
      sp.style.setProperty('--dx', Math.cos(angle)*dist + 'px');
      sp.style.setProperty('--dy', Math.sin(angle)*dist + 'px');
      sp.style.left = cx + 'px';
      sp.style.top = cy + 'px';
      sp.style.background = i % 3 === 0 ? '#fff' : hex;
      const sz = 3 + Math.random() * 6;
      sp.style.width = sz + 'px';
      sp.style.height = sz + 'px';
      sp.style.animationDuration = (0.45 + Math.random() * 0.45) + 's';
      layer.appendChild(sp);
      setTimeout(() => sp.remove(), 1000);
    }
  }

  // Copy
  function copyVal(type, el) {
    const map = {hex:'valHex', rgb:'valRgb', hsl:'valHsl', css:'valCss'};
    const text = document.getElementById(map[type]).textContent;
    navigator.clipboard.writeText(text).catch(()=>{});
    el.classList.add('copied');
    setTimeout(() => el.classList.remove('copied'), 1500);
    toast('Copied ' + text);
  }

  function toast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2000);
  }

  // Palette
  function renderPalette() {
    const c = document.getElementById('paletteSwatches');
    c.innerHTML = '';
    palette.forEach(hex => {
      const sw = document.createElement('div');
      sw.className = 'swatch';
      sw.style.background = hex;
      sw.setAttribute('data-hex', hex);
      sw.onclick = () => loadHex(hex);
      c.appendChild(sw);
    });
    const add = document.createElement('div');
    add.className = 'add-swatch';
    add.textContent = '+';
    add.onclick = addColor;
    c.appendChild(add);
  }

  function addColor() {
    const hex = document.getElementById('valHex').textContent;
    if (!palette.includes(hex)) {
      palette.push(hex);
      renderPalette();
      toast('Saved to palette!');
    } else {
      toast('Already saved!');
    }
  }

  function loadHex(hex) {
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    const {h} = rgbToHsl(r,g,b);
    currentHue = Math.round(h*360);
    hueSlider.value = currentHue;
    document.getElementById('hueVal').textContent = currentHue + '°';
    drawSpectrum();
    // Scan for best match
    const W = canvas.width, H = canvas.height;
    let best = Infinity, bx = pickerX, by = pickerY;
    for (let y=0; y<H; y+=3) {
      for (let x=0; x<W; x+=3) {
        const px = ctx.getImageData(x,y,1,1).data;
        const d = Math.abs(px[0]-r)+Math.abs(px[1]-g)+Math.abs(px[2]-b);
        if (d<best) { best=d; bx=x; by=y; }
      }
    }
    pickerX=bx; pickerY=by;
    drawSpectrum();
    updateUI(r,g,b);
  }

  function randomColor() {
    currentHue = Math.random() * 360;
    hueSlider.value = currentHue;
    document.getElementById('hueVal').textContent = Math.round(currentHue) + '°';
    pickerX = (0.3 + Math.random() * 0.6) * canvas.width;
    pickerY = (0.1 + Math.random() * 0.7) * canvas.height;
    drawSpectrum();
    pickColor(pickerX, pickerY);
    toast('New random color!');
  }

  window.addEventListener('resize', resizeCanvas);
  renderPalette();
  setTimeout(resizeCanvas, 50);
</script>
</body>
</html>